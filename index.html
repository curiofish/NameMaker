<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 작명소 - 당신의 소중한 이름을 위한 최고의 선택</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8f9fa;
        }
        .hero-section {
            background: linear-gradient(135deg, #6B73FF 0%, #000DFF 100%);
            color: white;
            padding: 100px 0;
            margin-bottom: 50px;
            position: relative;
            overflow: hidden;
        }
        .name-card {
            transition: transform 0.3s;
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .name-card:hover {
            transform: translateY(-5px);
        }
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        .loading-spinner {
            width: 3rem;
            height: 3rem;
        }
        .navbar {
            background: rgba(0,0,0,0.8) !important;
            backdrop-filter: blur(10px);
        }
        .navbar-brand {
            font-weight: 700;
            color: white !important;
        }
        .nav-link {
            color: rgba(255,255,255,0.8) !important;
            transition: color 0.3s;
        }
        .nav-link:hover {
            color: white !important;
        }
        .btn-primary {
            background: linear-gradient(135deg, #6B73FF 0%, #000DFF 100%);
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            transition: transform 0.3s;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <!-- 네비게이션 바 -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">AI 작명소</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#features">특징</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#generate">이름 생성</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 히어로 섹션 -->
    <section class="hero-section" style="margin-top: 70px;">
        <div class="container text-center">
            <h1 class="display-4 mb-4">AI 작명소</h1>
            <p class="lead mb-4">당신의 소중한 이름을 위한 최고의 선택</p>
            <a href="#generate" class="btn btn-light btn-lg" onclick="scrollToGenerate()">지금 시작하기</a>
        </div>
    </section>

    <!-- 이름 생성 섹션 -->
    <section id="generate" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">이름 생성하기</h2>
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card name-card">
                        <div class="card-body">
                            <form id="nameForm">
                                <div class="mb-3">
                                    <label for="family_name" class="form-label">성</label>
                                    <input type="text" class="form-control" id="family_name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="gender" class="form-label">성별</label>
                                    <select class="form-select" id="gender" required>
                                        <option value="">선택하세요</option>
                                        <option value="남">남성</option>
                                        <option value="여">여성</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="birth_year" class="form-label">출생년도</label>
                                    <input type="number" class="form-control" id="birth_year" min="1900" max="2100" required>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">이름 생성하기</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="loading mt-4">
                <div class="spinner-border loading-spinner text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-3">이름을 생성하는 중입니다...</p>
            </div>
            <div id="results" class="mt-5" style="display: none;">
                <h3 class="text-center mb-4">생성된 이름</h3>
                <div class="row" id="nameResults"></div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 미리 계산된 한자 배열
        const HANJA_CHARS = Object.keys(hanjaData);
        const CACHE_KEY = 'nameCache';

        // 시작하기 버튼 스크롤 함수
        function scrollToGenerate() {
            const generateSection = document.getElementById('generate');
            const headerOffset = 70;
            const elementPosition = generateSection.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.scrollY - headerOffset;

            window.scrollTo({
                top: offsetPosition,
                behavior: "smooth"
            });
        }

        // 한자 데이터
        const hanjaData = {
            '민': { meaning: '민첩하고 똑똑한', stroke: 5 },
            '준': { meaning: '준수하고 뛰어난', stroke: 10 },
            '서': { meaning: '서로 돕고 협력하는', stroke: 6 },
            '지': { meaning: '지혜롭고 현명한', stroke: 8 },
            '도': { meaning: '도움을 주는', stroke: 7 },
            '현': { meaning: '현명하고 지혜로운', stroke: 8 },
            '우': { meaning: '우수하고 뛰어난', stroke: 6 },
            '연': { meaning: '연약하고 부드러운', stroke: 7 },
            '은': { meaning: '은혜로운', stroke: 9 },
            '윤': { meaning: '윤택하고 풍요로운', stroke: 8 },
            '호': { meaning: '호기심 많고 탐구하는', stroke: 7 },
            '수': { meaning: '수려하고 아름다운', stroke: 6 },
            '영': { meaning: '영원하고 빛나는', stroke: 8 },
            '진': { meaning: '진실되고 성실한', stroke: 9 },
            '성': { meaning: '성공하고 번영하는', stroke: 7 },
            '하': { meaning: '크고 넓은', stroke: 3 },
            '태': { meaning: '태평하고 평화로운', stroke: 10 },
            '유': { meaning: '부드럽고 유연한', stroke: 5 },
            '인': { meaning: '어질고 착한', stroke: 4 },
            '예': { meaning: '아름답고 우아한', stroke: 8 },
            '채': { meaning: '빛나고 아름다운', stroke: 11 },
            '원': { meaning: '으뜸가는', stroke: 4 },
            '정': { meaning: '바르고 곧은', stroke: 8 },
            '승': { meaning: '이기고 승리하는', stroke: 11 },
            '혜': { meaning: '지혜롭고 총명한', stroke: 16 },
            '상': { meaning: '상서롭고 길한', stroke: 7 },
            '선': { meaning: '착하고 선한', stroke: 7 },
            '미': { meaning: '아름답고 고운', stroke: 6 },
            '래': { meaning: '다가올 미래', stroke: 9 },
            '한': { meaning: '크고 한없는', stroke: 9 },
            '소': { meaning: '웃음이 있는', stroke: 4 },
            '희': { meaning: '기쁨이 있는', stroke: 12 },
            '다': { meaning: '많고 풍성한', stroke: 3 },
            '온': { meaning: '온화하고 따뜻한', stroke: 8 },
            '해': { meaning: '밝고 빛나는', stroke: 10 }
        };

        // 이름 생성 로직
        const nameForm = document.getElementById('nameForm');
        const results = document.getElementById('results');
        const nameResults = document.getElementById('nameResults');
        const loading = document.querySelector('.loading');

        // 캐시에서 이름 가져오기
        function getFromCache(key) {
            const cache = localStorage.getItem(CACHE_KEY);
            if (cache) {
                const data = JSON.parse(cache);
                return data[key];
            }
            return null;
        }

        // 캐시에 이름 저장
        function saveToCache(key, names) {
            const cache = localStorage.getItem(CACHE_KEY);
            const data = cache ? JSON.parse(cache) : {};
            data[key] = names;
            localStorage.setItem(CACHE_KEY, JSON.stringify(data));
        }

        function generateNames(familyName, gender, birthYear) {
            // 캐시 키 생성
            const cacheKey = `${familyName}-${gender}-${birthYear}`;
            
            // 캐시된 결과가 있는지 확인
            const cachedNames = getFromCache(cacheKey);
            if (cachedNames) {
                return cachedNames;
            }

            const names = [];
            const usedCombinations = new Set();
            
            while (names.length < 5) {
                const firstName = HANJA_CHARS[Math.floor(Math.random() * HANJA_CHARS.length)];
                const secondName = HANJA_CHARS[Math.floor(Math.random() * HANJA_CHARS.length)];
                const combination = firstName + secondName;
                
                if (!usedCombinations.has(combination) && firstName !== secondName) {
                    usedCombinations.add(combination);
                    const meaning = getMeaning(combination);
                    const score = calculateScore(combination, birthYear);
                    names.push({
                        name: familyName + combination,
                        hanja: combination,
                        meaning: meaning,
                        score: score,
                        analysis: generateAnalysis(combination, birthYear)
                    });
                }
            }
            
            // 결과를 캐시에 저장
            saveToCache(cacheKey, names);
            return names;
        }

        function getMeaning(name) {
            return Array.from(name)
                .map(char => hanjaData[char]?.meaning)
                .filter(Boolean)
                .join(', ');
        }

        function calculateScore(name, birthYear) {
            const totalStrokes = Array.from(name)
                .reduce((sum, char) => sum + (hanjaData[char]?.stroke || 0), 0);

            const yearLastDigit = birthYear % 10;
            const strokeHarmony = Math.abs(totalStrokes - yearLastDigit * 2);
            const score = 70 + (10 - strokeHarmony) * 2;

            return Math.min(100, Math.max(70, score));
        }

        function generateAnalysis(name, birthYear) {
            const analysis = [];
            const yearLastDigit = birthYear % 10;
            const totalStrokes = Array.from(name)
                .reduce((sum, char) => sum + (hanjaData[char]?.stroke || 0), 0);

            // 각 글자 분석
            Array.from(name).forEach(char => {
                const hanja = hanjaData[char];
                if (hanja) {
                    analysis.push(`${char}: ${hanja.meaning} (획수: ${hanja.stroke})`);
                }
            });

            // 음양 조화 분석
            analysis.push(totalStrokes % 2 === 0 ? 
                '음양 조화가 잘 맞는 이름입니다.' : 
                '독특한 개성을 가진 이름입니다.');

            // 출생년도 조화 분석
            if (Math.abs(totalStrokes - yearLastDigit * 2) <= 2) {
                analysis.push('출생년도와 조화로운 이름입니다.');
            }

            return analysis;
        }

        function displayResults(names) {
            nameResults.innerHTML = '';
            results.style.display = 'block';

            names.forEach(name => {
                const col = document.createElement('div');
                col.className = 'col-md-6 mb-4';
                col.innerHTML = `
                    <div class="card h-100 name-card">
                        <div class="card-body">
                            <h4 class="card-title">${name.name}</h4>
                            <p class="card-text">
                                <strong>한자:</strong> ${name.hanja}<br>
                                <strong>의미:</strong> ${name.meaning}<br>
                                <strong>운세 점수:</strong> ${name.score}점
                            </p>
                            <div class="analysis-detail mt-3">
                                <h5>상세 분석</h5>
                                <ul class="list-group list-group-flush">
                                    ${name.analysis.map(item => `
                                        <li class="list-group-item">
                                            <i class="fas fa-check text-success me-2"></i>
                                            ${item}
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
                nameResults.appendChild(col);
            });
        }

        // 폼 제출 이벤트 리스너
        nameForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const familyName = document.getElementById('family_name').value;
            const gender = document.getElementById('gender').value;
            const birthYear = document.getElementById('birth_year').value;

            // 로딩 표시
            loading.style.display = 'block';
            results.style.display = 'none';
            nameResults.innerHTML = '';

            // 비동기로 이름 생성 (시간 단축: 1000ms → 300ms)
            setTimeout(() => {
                const names = generateNames(familyName, gender, birthYear);
                displayResults(names);
                loading.style.display = 'none';
                results.style.display = 'block';
            }, 300);
        });

        // 스크롤 시 네비게이션 바 스타일 변경
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            navbar.style.backgroundColor = window.scrollY > 50 ? 
                'rgba(0,0,0,0.9)' : 
                'rgba(0,0,0,0.8)';
        });

        // 부드러운 스크롤
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                const headerOffset = 70;
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.scrollY - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });
            });
        });
    </script>
</body>
</html> 